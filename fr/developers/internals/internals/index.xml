<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OSRD – Fonctionnement interne</title><link>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/</link><description>Recent content in Fonctionnement interne on OSRD</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/index.xml" rel="self" type="application/rss+xml"/><item><title>Developers: Interlocking</title><link>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/interlocking/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/interlocking/</guid><description>
&lt;div class="alert alert-warning" role="alert">
Cette partie est en cours d&amp;rsquo;implémentation. Le code existant n&amp;rsquo;a pas encore cette structure.
&lt;/div>
&lt;h1 id="architecture">Architecture&lt;/h1>
&lt;pre tabindex="0">&lt;code class="language-mermaid" data-lang="mermaid">flowchart TD
train[Train]
signaling[Signalisation]
routing[Couche de routage]
detection[Couche de détection]
infra[&amp;#34;Couche d&amp;#39;infrastructure&amp;#34;]
spacing[&amp;#34;Couche de cantonnement&amp;#34;]
train -- réagit à --&amp;gt; signaling
train -- informe --&amp;gt; detection
signaling -- observe --&amp;gt; routing
signaling -- observe --&amp;gt; spacing
spacing -- observe --&amp;gt; detection
spacing -- observe --&amp;gt; infra
routing -- observe et réserve --&amp;gt; detection
detection -- réserve et actionne --&amp;gt; infra
click signaling href &amp;#34;./#signaling&amp;#34; _self
click routing href &amp;#34;./#routing&amp;#34; _self
click spacing href &amp;#34;./#spacing&amp;#34; _self
click detection href &amp;#34;./#detection&amp;#34; _self
click infra href &amp;#34;./#infra&amp;#34; _self
&lt;/code>&lt;/pre>&lt;h1 id="infra">Couche d&amp;rsquo;infrastructure&lt;/h1>
&lt;p>Gère l&amp;rsquo;état des organes de commande (des aiguilles) et leur réservation&lt;/p>
&lt;h2 id="état">État&lt;/h2>
&lt;p>Chaque organe de commande a une liste d&amp;rsquo;états possibles et mutuellement exclusifs&lt;/p>
&lt;h2 id="opérations-possibles">Opérations possibles&lt;/h2>
&lt;ul>
&lt;li>lock / unlock une aiguille&lt;/li>
&lt;li>bouger une anguille&lt;/li>
&lt;/ul>
&lt;h1 id="detection">Couche de détection (TVDSections)&lt;/h1>
&lt;p>Gère la localisation des trains sur les voies, et la réservation de zones&lt;/p>
&lt;h2 id="état-1">État&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">ZoneState&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">reservation&lt;/span>: &lt;span style="color:#000">ZoneReservationState&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">occupation&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">usize&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">enum&lt;/span> &lt;span style="color:#000">ZoneReservationState&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Free&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Reserved&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">config&lt;/span>: &lt;span style="color:#000">ZoneConfig&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">count&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">usize&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="opérations">Opérations&lt;/h2>
&lt;ul>
&lt;li>Observer les changements d&amp;rsquo;état d&amp;rsquo;une zone&lt;/li>
&lt;li>Réserver une configuration de zone&lt;/li>
&lt;li>Relacher une réservation de zone&lt;/li>
&lt;li>Occuper la zone&lt;/li>
&lt;li>Libérer la zone&lt;/li>
&lt;/ul>
&lt;h2 id="définition">Définition&lt;/h2>
&lt;p>Les zones (ou TVDSection / DetectionSection) sont des partitions physiques des voies:&lt;/p>
&lt;ul>
&lt;li>capables de détecter la présence d&amp;rsquo;un train&lt;/li>
&lt;li>qui fournissent un service de réservation à l&amp;rsquo;usage des routes&lt;/li>
&lt;/ul>
&lt;p>Chaque zone a un certain nombre de configurations différentes.
Par exemple, une zone sans aiguille aura deux configurations:&lt;/p>
&lt;ul>
&lt;li>sens pair&lt;/li>
&lt;li>sens impair&lt;/li>
&lt;/ul>
&lt;p>Une zone avec une aiguille aura 4 configurations:&lt;/p>
&lt;ul>
&lt;li>sens pair voie principale&lt;/li>
&lt;li>sens impair voie principale&lt;/li>
&lt;li>sens pair voie déviation&lt;/li>
&lt;li>sens impair voie déviation&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Chaque zone ne peut être réservée que pour une configuration donnée à la fois, mais peut être réservée simultanément par plusieurs routes&lt;/strong>.
Une zone ne peut changer de configuration que lorsqu&amp;rsquo;elle n&amp;rsquo;est pas réservée.&lt;/p>
&lt;p>L&amp;rsquo;enclanchement de transit est un enclanchement qui vise à empêcher le mouvement d&amp;rsquo;un appareil de voie lorsqu&amp;rsquo;un train est en approche.
Il concerne les organes de commandes des aiguilles.
un enclanchement est un système qui permet d&amp;rsquo;imposer des ordres de manoeuvre sur un système, soit imposer des interdictions&lt;/p>
&lt;h1 id="routing">Couche de routage (routes)&lt;/h1>
&lt;p>Gère le cycle de vie des routes, qui réservent des zones lors de leur activation.&lt;/p>
&lt;h2 id="état-2">État&lt;/h2>
&lt;pre tabindex="0">&lt;code class="language-mermaid" data-lang="mermaid">flowchart LR
subgraph &amp;#34;exclusivement réservé&amp;#34;
commandé
formé
utilisé
end
détruit
détruit --&amp;gt; commandé
commandé --&amp;gt; formé
formé --&amp;gt; utilisé
utilisé --&amp;gt; détruit
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>&lt;strong>commandée&lt;/strong>: dès que la route est en attente de formation&lt;/li>
&lt;li>&lt;strong>formé&lt;/strong>: quand le transit est lancé au travers de chacune des zones, et les appareils de voie sont dans la position attendue&lt;/li>
&lt;li>&lt;strong>en cours d&amp;rsquo;utilisation&lt;/strong>: dès que la tête du train rentre dans la première zone&lt;/li>
&lt;li>&lt;strong>détruit&lt;/strong>, l&amp;rsquo;état par défaut: dès que la queue du train a libéré la première zone.
c&amp;rsquo;est important pour qu&amp;rsquo;on puisse re-réserver l&amp;rsquo;itinéraire sans attendre qu&amp;rsquo;ils soit entièrement parcouru par un premier train&lt;/li>
&lt;/ul>
&lt;h2 id="opérations-1">Opérations&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>activer une route&lt;/strong>: démarre un processus asynchrone qui ne se terminera que lorsque la route aura été réservée, puis qu&amp;rsquo;un train l&amp;rsquo;aura parcourue&lt;/li>
&lt;/ul>
&lt;h2 id="comportement">Comportement&lt;/h2>
&lt;ul>
&lt;li>Chaque route ne peut être en cours de formation qu&amp;rsquo;une seule fois&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">activate&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">async&lt;/span> &lt;span style="color:#204a87;font-weight:bold">with&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">lock&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">switch_state&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">REQUESTED&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic"># zone_sequence is a list of the zones of the route,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic"># sorted by any absolute order to avoid deadlocks&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> &lt;span style="color:#000">zone&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">config&lt;/span> &lt;span style="color:#204a87;font-weight:bold">in&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">zone_sequence&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">await&lt;/span> &lt;span style="color:#000">zone&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">reserve&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">config&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">switch_state&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">READY&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">first_zone&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">zones&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">await&lt;/span> &lt;span style="color:#000">first_zone&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">wait_occupation_state&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">OCCUPIED&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">switch_state&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">USED&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">await&lt;/span> &lt;span style="color:#000">first_zone&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">wait_occupation_state&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">FREE&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">switch_state&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">DESTROYED&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;div class="alert alert-info" role="alert">
certains postes d&amp;rsquo;aiguillages ont un enclanchement entre itinéraires de sens contraire (affrontement) qui empêche l&amp;rsquo;activation d&amp;rsquo;une route en menant à une zone avec un transit en sens contraire.
&lt;/div>
&lt;h1 id="spacing">Couche de cantonnement&lt;/h1>
&lt;p>La couche de cantonnement gère des routes de signal à signal.
Elle permet à la signalisation d&amp;rsquo;observer l&amp;rsquo;état d&amp;rsquo;un groupe
de zones protégées par chaque signal, et de trouver le signal
suivant dans la chaîne.&lt;/p>
&lt;p>Requirements:&lt;/p>
&lt;ul>
&lt;li>chaque signal doit connaître le prochain signal compatible&lt;/li>
&lt;li>chaque signal doit connaître les zones qu&amp;rsquo;il protège&lt;/li>
&lt;li>compatibilité modules signalisation:
pour chaque signal dans railjson, un choisit quel module doit l&amp;rsquo;importer
une fois que tous les signaux sont importés, les modules doivent créer des routes de cantonnement entre signaux. Chaque route de cantonnement est associée à un système de signalisation&lt;/li>
&lt;li>compatibilité pathfinding: Le pathfinding se fait dans le graphe des routes de mouvement, mais les déplacements sont contraints aux chemins qui sont permis par la couche de cantonnement&lt;/li>
&lt;/ul>
&lt;h1 id="signaling">Couche de signalisation&lt;/h1>
&lt;p>Réagit aux changements d&amp;rsquo;état de la signalisation&lt;/p>
&lt;p>La couche de signalisation peut observer les changements d&amp;rsquo;état des routes et réagir en fonction.&lt;/p>
&lt;h1 id="questions-en-suspens">Questions en suspens&lt;/h1>
&lt;ul>
&lt;li>overlap&lt;/li>
&lt;li>flank protection&lt;/li>
&lt;li>opposing movement protection&lt;/li>
&lt;/ul></description></item><item><title>Developers: Modèle de données</title><link>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/data-model/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/data-model/</guid><description/></item><item><title>Developers: Gestion des versions</title><link>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/versionning/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dgexsolutions.github.io/osrd-website/fr/developers/internals/internals/versionning/</guid><description/></item></channel></rss>