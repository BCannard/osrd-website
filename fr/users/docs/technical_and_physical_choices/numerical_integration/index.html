<!doctype html><html lang=fr class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.99.1"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/osrd-website/favicons/favicon.ico><link rel=apple-touch-icon href=/osrd-website/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/osrd-website/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/osrd-website/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/osrd-website/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/osrd-website/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/osrd-website/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/osrd-website/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/osrd-website/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/osrd-website/favicons/android-192x192.png sizes=192x192><title>Intégration numérique | OSRD</title><meta name=description content="


"><meta property="og:title" content="Intégration numérique"><meta property="og:description" content="Introduction OSRD, en tant que simulateur d&rsquo;exploitation de train, doit être capable de simuler la physique d&rsquo;un voyage en train. L&rsquo;accélération du train étant influencée par de nombreux facteurs différents changeant le long du trajet (pente, courbure, force de traction du moteur&mldr;), la simulation doit être séparée en étapes suffisamment petites pour considérer tous ces facteurs comme constants, puis utiliser l&rsquo;équation du mouvement de Newton pour calculer le déplacement et la vitesse du train."><meta property="og:type" content="article"><meta property="og:url" content="https://dgexsolutions.github.io/osrd-website/fr/users/docs/technical_and_physical_choices/numerical_integration/"><meta property="article:section" content="users"><meta property="og:site_name" content="OSRD"><meta itemprop=name content="Intégration numérique"><meta itemprop=description content="Introduction OSRD, en tant que simulateur d&rsquo;exploitation de train, doit être capable de simuler la physique d&rsquo;un voyage en train. L&rsquo;accélération du train étant influencée par de nombreux facteurs différents changeant le long du trajet (pente, courbure, force de traction du moteur&mldr;), la simulation doit être séparée en étapes suffisamment petites pour considérer tous ces facteurs comme constants, puis utiliser l&rsquo;équation du mouvement de Newton pour calculer le déplacement et la vitesse du train."><meta itemprop=wordCount content="1156"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Intégration numérique"><meta name=twitter:description content="Introduction OSRD, en tant que simulateur d&rsquo;exploitation de train, doit être capable de simuler la physique d&rsquo;un voyage en train. L&rsquo;accélération du train étant influencée par de nombreux facteurs différents changeant le long du trajet (pente, courbure, force de traction du moteur&mldr;), la simulation doit être séparée en étapes suffisamment petites pour considérer tous ces facteurs comme constants, puis utiliser l&rsquo;équation du mouvement de Newton pour calculer le déplacement et la vitesse du train."><link rel=preload href=/osrd-website/scss/main.min.5b1cf376601423e4415d4d76ed141bfd11a63f940aa9edc7502d583661880a20.css as=style><link href=/osrd-website/scss/main.min.5b1cf376601423e4415d4d76ed141bfd11a63f940aa9edc7502d583661880a20.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/osrd-website/fr/><span class=navbar-logo><svg id="Calque_1" data-name="Calque 1" viewBox="0 0 64 64" sodipodi:docname="logo_osrd_seul_blanc.svg" width="64" height="64" inkscape:version="1.1.2 (0a00cf5339, 2022-02-04)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="3440" inkscape:window-height="1380" id="namedview47" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="3.0016455" inkscape:cx="12.992873" inkscape:cy="71.294228" inkscape:window-x="0" inkscape:window-y="32" inkscape:window-maximized="1" inkscape:current-layer="Calque_1" inkscape:pagecheckerboard="0"/><defs id="defs4"><style id="style2">.cls-1,.cls-2,.cls-3,.cls-4,.cls-7{fill:none;stroke-linecap:round;stroke-linejoin:round}.cls-1,.cls-4{stroke:#aa026d}.cls-1,.cls-2{stroke-width:10px}.cls-2,.cls-3{stroke:#71196f}.cls-3,.cls-4{stroke-width:5px}.cls-5,.cls-6{font-size:119.48px}.cls-5{fill:#71196f;font-family:AvenirLTStd-Heavy,Avenir LT Std}.cls-6{fill:#aa026d;font-family:AvenirLTStd-Medium,Avenir LT Std}.cls-7{stroke:#fff;stroke-width:.75px}</style></defs><title id="title6">logo-OSRD_</title><g id="g847" transform="matrix(0.09645818,0,0,0.09645818,7.1489968,-1.215e-6)"><path inkscape:connector-curvature="0" class="cls-1" d="m389.52 658.5v-88c0-199.26-91.83-331.42-279.82-362" id="path8" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m298.5 658.5v-87.07c0-156.89-75.34-258.73-229.71-276" id="path10" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m216.77 658.5v-70.49c0-121.76-58.68-200.64-178.91-213.6" id="path12" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="M125.74 658.5V617.36C125.74 533.21 86.13 478 5 466.95" id="path14" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m125.74 658.5v-88c0-199.26 91.84-331.42 279.83-362" id="path16" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m216.77 658.5v-87.07c0-156.89 75.34-258.73 229.71-276" id="path18" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m298.5 658.5v-70.49c0-121.76 58.68-200.64 178.91-213.6" id="path20" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m389.52 658.5v-41.14c0-84.15 39.62-139.36 120.75-150.41" id="path22" style="stroke:#f2f2f2;stroke-opacity:1"/><line class="cls-3" x1="126" y1="642.5" x2="126" y2="122.5" id="line24" style="stroke:#a0a0a0;stroke-opacity:1"/><line class="cls-3" x1="217" y1="642.5" x2="217" y2="2.5" id="line26" style="stroke:#a0a0a0;stroke-opacity:1"/><line class="cls-4" x1="299" y1="642.5" x2="299" y2="2.5" id="line28" style="stroke:#f7f7f7;stroke-opacity:1"/><line class="cls-4" x1="390" y1="642.5" x2="390" y2="122.5" id="line30" style="stroke:#f2f2f2;stroke-opacity:1"/></g></svg></span><span class=font-weight-bold>OSRD</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/who-we-are/><span>Qui sommes-nous ?</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/osrd-website/fr/users/><span class=active>Utilisateurs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/developers/><span>Développeurs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/partnership/><span>Partenariats</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/news/><span>News</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Français</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/osrd-website/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Rechercher dans ce site…" aria-label="Rechercher dans ce site…" autocomplete=off data-offline-search-index-json-src=/osrd-website/offline-search-index.e26e1c3b004a4656cd14c25eec95c02d.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Rechercher dans ce site…" aria-label="Rechercher dans ce site…" autocomplete=off data-offline-search-index-json-src=/osrd-website/offline-search-index.e26e1c3b004a4656cd14c25eec95c02d.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Français</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/osrd-website/en/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-osrd-websitefrusers-li><a href=/osrd-website/fr/users/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-osrd-websitefrusers><span>Utilisateurs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-osrd-websitefrusersdocs-li><input type=checkbox id=m-osrd-websitefrusersdocs-check checked>
<label for=m-osrd-websitefrusersdocs-check><a href=/osrd-website/fr/users/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-osrd-websitefrusersdocs><span>Documentation</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-osrd-websitefrusersdocsuserguide-li><input type=checkbox id=m-osrd-websitefrusersdocsuserguide-check>
<label for=m-osrd-websitefrusersdocsuserguide-check><a href=/osrd-website/fr/users/docs/userguide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-osrd-websitefrusersdocsuserguide><span>Guide utilisateur</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-osrd-websitefrusersdocstutorials-li><input type=checkbox id=m-osrd-websitefrusersdocstutorials-check>
<label for=m-osrd-websitefrusersdocstutorials-check><a href=/osrd-website/fr/users/docs/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-osrd-websitefrusersdocstutorials><span>Tutoriels</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-osrd-websitefrusersdocstechnical-and-physical-choices-li><input type=checkbox id=m-osrd-websitefrusersdocstechnical-and-physical-choices-check>
<label for=m-osrd-websitefrusersdocstechnical-and-physical-choices-check><a href=/osrd-website/fr/users/docs/technical-and-physical-choices/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-osrd-websitefrusersdocstechnical-and-physical-choices><span>Choix techniques</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-osrd-websitefrusersdocstechnical_and_physical_choices-li><input type=checkbox id=m-osrd-websitefrusersdocstechnical_and_physical_choices-check checked>
<label for=m-osrd-websitefrusersdocstechnical_and_physical_choices-check><a href=/osrd-website/fr/users/docs/technical_and_physical_choices/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-osrd-websitefrusersdocstechnical_and_physical_choices><span>Choix techniques et phyiques</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesarchitecture-li><input type=checkbox id=m-osrd-websitefrusersdocstechnical_and_physical_choicesarchitecture-check>
<label for=m-osrd-websitefrusersdocstechnical_and_physical_choicesarchitecture-check><a href=/osrd-website/fr/users/docs/technical_and_physical_choices/architecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesarchitecture><span>Architecture de l'outil OSRD</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesphysical_modeling-li><input type=checkbox id=m-osrd-websitefrusersdocstechnical_and_physical_choicesphysical_modeling-check>
<label for=m-osrd-websitefrusersdocstechnical_and_physical_choicesphysical_modeling-check><a href=/osrd-website/fr/users/docs/technical_and_physical_choices/physical_modeling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesphysical_modeling><span>Modélisation physique</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesnumerical_integration-li><input type=checkbox id=m-osrd-websitefrusersdocstechnical_and_physical_choicesnumerical_integration-check checked>
<label for=m-osrd-websitefrusersdocstechnical_and_physical_choicesnumerical_integration-check><a href=/osrd-website/fr/users/docs/technical_and_physical_choices/numerical_integration/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesnumerical_integration><span class=td-sidebar-nav-active-item>Intégration numérique</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesenvelop_system-li><input type=checkbox id=m-osrd-websitefrusersdocstechnical_and_physical_choicesenvelop_system-check>
<label for=m-osrd-websitefrusersdocstechnical_and_physical_choicesenvelop_system-check><a href=/osrd-website/fr/users/docs/technical_and_physical_choices/envelop_system/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-osrd-websitefrusersdocstechnical_and_physical_choicesenvelop_system><span>Le système d'enveloppes</span></a></label></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/DGEXSolutions/osrd-website/tree/main/content/fr/users/docs/technical_and_physical_choices/numerical_integration.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> [i18n] post_view_this</a>
<a href=https://github.com/DGEXSolutions/osrd-website/edit/main/content/fr/users/docs/technical_and_physical_choices/numerical_integration.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Modifier cette page</a>
<a href="https://github.com/DGEXSolutions/osrd-website/new/main/content/fr/users/docs/technical_and_physical_choices/numerical_integration.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Créer une page dans cette section</a>
<a href="https://github.com/DGEXSolutions/osrd-website/issues/new?title=Int%c3%a9gration%20num%c3%a9rique" class=td-page-meta--issue target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Signaler un problème dans la documentation</a>
<a href=https://github.com/DGEXSolutions/osrd/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Signaler un problème dans le projet</a>
<a id=print href=https://dgexsolutions.github.io/osrd-website/fr/users/docs/technical_and_physical_choices/_print/><i class="fa fa-print fa-fw"></i> Imprimer la section entière</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://dgexsolutions.github.io/osrd-website/fr/users/>Utilisateurs</a></li><li class=breadcrumb-item><a href=https://dgexsolutions.github.io/osrd-website/fr/users/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://dgexsolutions.github.io/osrd-website/fr/users/docs/technical_and_physical_choices/>Choix techniques et phyiques</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://dgexsolutions.github.io/osrd-website/fr/users/docs/technical_and_physical_choices/numerical_integration/>Intégration numérique</a></li></ol></nav><div class=td-content><h1>Intégration numérique</h1><header class=article-meta></header><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css integrity=sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js integrity=sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script><h4 id=introduction>Introduction</h4><p>OSRD, en tant que simulateur d&rsquo;exploitation de train, doit être capable de simuler la physique d&rsquo;un voyage en train. L&rsquo;accélération du train étant influencée par de nombreux facteurs différents changeant le long du trajet (pente, courbure, force de traction du moteur&mldr;), la simulation doit être séparée en étapes suffisamment petites pour considérer tous ces facteurs comme constants, puis utiliser l&rsquo;équation du mouvement de Newton pour calculer le déplacement et la vitesse du train. La méthode d&rsquo;Euler est la plus simple pour calculer ces paramètres, mais elle présente un certain nombre d&rsquo;inconvénients. Cet article explique la méthode d&rsquo;Euler, pourquoi elle ne convient pas aux besoins d&rsquo;OSRD et quelle méthode d&rsquo;intégration doit être utilisée pour la remplacer.</p><h4 id=la-méthode-deuler>La méthode d&rsquo;Euler</h4><h5 id=avec-des-pas-de-temps>Avec des pas de temps</h5><p>La méthode d&rsquo;Euler appliquée à l&rsquo;intégration de l&rsquo;équation du mouvement d&rsquo;un train est :</p><p>$$v_{n+1}=\gamma_n(v_n)dt+v_n$$<div style=text-align:center><strong>(1)</strong></div></p><p>$$x_{n+1}=\frac{1}{2}\gamma_n(v_n)dt^2+v_ndt+x_n$$<div style=text-align:center><strong>(2)</strong></div></p><p>Avec :</p><ul><li><em>v<sub>n+1</sub></em> : vitesse calculée au pas <strong>n+1</strong></li><li><em>γ<sub>n</sub>(v<sub>n</sub>)</em> : accélération calculée au pas <strong>n</strong></li><li><em>v<sub>n</sub></em> : vitesse calculée à l&rsquo;étape <strong>n</strong></li></ul><h5 id=avec-des-pas-de-distance>Avec des pas de distance</h5><p>Au lieu d&rsquo;utiliser un pas de temps <em>dt</em>, nous séparons le calcul par des pas de distance <em>h</em>. Ainsi, en utilisant l&rsquo;équation d&rsquo;intégration temporelle <strong>(2)</strong> ci-dessus, sachant que <em>x<sub>n+1</sub>-x<sub>n</sub>=h</em>, nous obtenons :</p><p>$$dt=-\frac{v_n}{\gamma_n(v_n)}+\sqrt{(\frac{v_n}{\gamma_n(v_n)})^2+\frac{2h}{\gamma_n(v_n)}}$$<div style=text-align:center><strong>(3)</strong></div></p><p>Et en utilisant <strong>(1)</strong>, en remplaçant <em>dt</em>, on obtient :</p><p>$$v_{n+1}=\sqrt{v^2_n+2h\gamma_n(v_n)}$$<div style=text-align:center><strong>(4)</strong></div></p><p>Et puis simplement :
$$x_{n+1}=x_n+h$$<div style=text-align:center><strong>(5)</strong></div></p><h4 id=pourquoi-la-méthode-deuler-utilisant-lintégration-temporelle-ne-convient-elle-pas-à-nos-besoins->Pourquoi la méthode d&rsquo;Euler utilisant l&rsquo;intégration temporelle ne convient-elle pas à nos besoins ?</h4><p>La méthode d&rsquo;intégration d&rsquo;Euler dans le temps présente un certain nombre de problèmes :</p><ul><li>Comme on intègre dans le temps, on ne peut retrouver que les conditions du point de départ de l&rsquo;étape d&rsquo;intégration (pente, paramètres d&rsquo;infrastructure, etc.) car on ne sait pas où elle se termine</li><li>Elle ne permet pas d&rsquo;anticiper les futurs changements de directive : nous ne pouvons réagir qu&rsquo;en comparant l&rsquo;état actuel du train à ce qu&rsquo;il est censé être</li><li>La méthode actuelle génère beaucoup de données, car il y a beaucoup d&rsquo;étapes d&rsquo;intégration</li></ul><h4 id=la-méthode-deuler-cauchy>La méthode d&rsquo;Euler-Cauchy</h4><h5 id=avec-des-pas-de-temps-1>Avec des pas de temps</h5><p>La méthode Euler-Cauchy appliquée à l&rsquo;intégration de l&rsquo;équation du mouvement d&rsquo;un train est :</p><p>$$v^*_{n+1}=\gamma_n(v_n)dt+v_n$$<div style=text-align:center><strong>(6)</strong></div></p><p>$$\gamma=\frac{\gamma_n(v_n)+\gamma_{n+1}(v^*_{n+1})}{2}$$<div style=text-align:center><strong>(7)</strong></div></p><p>$$v_{n+1}=\gamma dt+v_n$$<div style=text-align:center><strong>(8)</strong></div></p><p>Elle fonctionne de la même manière que la méthode d&rsquo;Euler, mais en remplaçant l&rsquo;accélération à l&rsquo;étape <strong>n</strong> par la valeur moyenne de l&rsquo;accélération entre l&rsquo;étape <strong>n</strong> et une étape approximative <strong>n+1</strong>.</p><h5 id=avec-des-pas-de-distance-1>Avec des pas de distance</h5><p>Même chose que la méthode d&rsquo;Euler, sachant que <em>x<sub>n+1</sub>-x<sub>n</sub>=h</em>, on obtient :</p><p>$$v_{n+1}=\sqrt{v^2_n+2h\gamma}$$<div style=text-align:center><strong>(9)</strong></div></p><p>Avec :</p><p>$$\gamma=\frac{\gamma_n(v_n)+\gamma_{n+1}(v^*_{n+1})}{2}$$</p><p>$$v^*_{n+1}=\gamma_n(v_n)dt+v_n$$</p><h4 id=la-méthode-rk4>La méthode RK4</h4><h5 id=avec-des-pas-de-temps-2>Avec des pas de temps</h5><p>La méthode Runge-Kutta 4 appliquée à l&rsquo;intégration de l&rsquo;équation du mouvement d&rsquo;un train est :</p><p>$$v_{n+1}=v_n+\frac{h}{6}(k_1+2k_2+2k_3+k_4)$$<div style=text-align:center><strong>(10)</strong></div></p><p>Avec :</p><p>$$k_1=\gamma_n(v_n)$$<div style=text-align:center><strong>(11)</strong></div></p><p>$$k_2=\gamma_{n+\frac{1}{2}}(v_n+\frac{h}{2}k_1)$$<div style=text-align:center><strong>(12)</strong></div></p><p>$$k_3=\gamma_{n+\frac{1}{2}}(v_n+\frac{h}{2}k_2)$$<div style=text-align:center><strong>(13)</strong></div></p><p>$$k_4=\gamma_{n+1}(v_n+hk_3)$$<div style=text-align:center><strong>(14)</strong></div></p><h5 id=avec-des-pas-de-distance-2>Avec des pas de distance</h5><p>La même chose, mais cette fois :</p><p>$$v_{n+1}=\sqrt{v^2_n+2h\gamma}$$<div style=text-align:center><strong>(9)</strong></div></p><p>Avec :</p><p>$$\gamma=\frac{1}{6}(k_1+2k_2+2k_3+k_4)$$<div style=text-align:center><strong>(15)</strong></div></p><h4 id=quelle-méthode-choisir->Quelle méthode choisir ?</h4><h5 id=étude-de-la-précision-et-de-la-vitesse-de-calcul>Étude de la précision et de la vitesse de calcul</h5><p>Différentes méthodes d&rsquo;intégration auraient pu remplacer l&rsquo;intégration d&rsquo;Euler de base dans l&rsquo;algorithme d&rsquo;OSRD. Afin de décider quelle méthode conviendrait le mieux, une étude sur la précision et la vitesse de calcul de différentes méthodes a été menée. Cette étude a comparé les méthodes suivantes :</p><ul><li>Euler</li><li>Euler-Cauchy</li><li>Runge-Kutta 4</li><li>Adams 2</li><li>Adams 3</li></ul><p>Toutes les explications sur ces méthodes peuvent être trouvées dans <a href=https://github.com/DGEXSolutions/osrd/wiki/documents/integration/MethodesNumeriques_EricGoncalves.pdf>ce document</a>, et le code python utilisé pour la simulation est <a href=https://raw.githubusercontent.com/wiki/DGEXSolutions/osrd/code/integration/Tests_precision.py>ici</a>.</p><p>La simulation calcule la position et la vitesse d&rsquo;un 2TGVDAZYEUM accélérant sur une ligne droite plate. L&rsquo;intégration se fait en fonction du temps et non de la distance, car elle est beaucoup plus rapide à mettre en œuvre.</p><h6 id=simulation-avec-les-mêmes-pas-de-temps>Simulation avec les mêmes pas de temps</h6><p>Une courbe de référence a été simulée en utilisant la méthode d&rsquo;Euler avec un pas de temps de 0,1s, puis les autres méthodes ont été simulées avec un pas de temps de 1s. Il est alors possible de comparer simplement chaque courbe à la courbe de référence, en calculant la valeur absolue de la différence à chaque point calculé. Voici l&rsquo;erreur absolue résultante de la position du train sur sa distance parcourue :</p><p><img src=../precisions_h_equivalent.png alt=precisions_h_equivalent></p><p>Il apparaît immédiatement que la méthode d&rsquo;Euler est d&rsquo;environ d&rsquo;un ordre de grandeur moins précise que les quatre autres. Chaque courbe présente un pic où la précision est extrêmement élevée (erreur extrêmement faible), ce qui s&rsquo;explique par le fait que toutes les courbes commencent légèrement au-dessus de la courbe de référence, la croisent en un point et finissent légèrement en dessous, ou vice-versa.</p><p>Mais comme la précision n&rsquo;est pas le seul indicateur important, le temps de calcul de chaque méthode a été mesuré, et voici ce que nous obtenons pour les mêmes paramètres d&rsquo;entrée (les valeurs sont en secondes) :</p><p><img src=../time_h_equivalent.png alt=time_h_equivalent></p><p>Ainsi, Euler-Cauchy et Adams 2 sont environ deux fois plus lents que Euler, Adams 3 est environ trois fois plus lent, et RK4 est environ quatre fois plus lent. Ces résultats ont été vérifiés sur des simulations beaucoup plus longues, et les ratios 2 et 3 sont maintenus.</p><h5 id=simulation-avec-temps-de-calcul-équivalent>Simulation avec temps de calcul équivalent</h5><p>Comme les temps de calcul de toutes les méthodes dépendent linéairement du pas de temps, il est assez facile de comparer la précision pour un temps de calcul à peu près identique. En multipliant le pas de temps d&rsquo;Euler-Cauchy et d&rsquo;Adams 2 par 2, le pas de temps d&rsquo;Adams 3 par 3, et le pas de temps de RK4 par 4, voici les courbes d&rsquo;erreur absolue résultantes :</p><p><img src=../precisions_time_equivalent.png alt=precisions_time_equivalent></p><p>Et voici les temps de calcul, en secondes :</p><p><img src=../time_time_equivalent.png alt=time_time_equivalent></p><p>Après un certain temps, RK4 tend à être la méthode la plus précise, légèrement plus précise que Euler-Cauchy, et toujours bien plus précise que la méthode d&rsquo;Euler.</p><h4 id=pourquoi-garder-runge-kutta-4>Pourquoi garder Runge-Kutta 4</h4><h5 id=conclusions-de-létude-précédente>Conclusions de l&rsquo;étude précédente</h5><p>L&rsquo;étude de la précision et de la vitesse de calcul présentée ci-dessus montre que RK4 et Euler-Cauchy seraient de bons candidats pour remplacer l&rsquo;algorithme d&rsquo;Euler dans OSRD : les deux sont rapides, précis, et assez faciles à mettre en œuvre car ils ne font que des calculs dans une étape courante. <strong>Il a été décidé qu&rsquo;OSRD utiliserait la méthode Runge-Kutta 4 parce qu&rsquo;elle est légèrement plus précise que Euler-Cauchy et que c&rsquo;est une méthode bien connue pour ce type de calcul, donc très adaptée à un simulateur open-source.</strong></p><h4 id=comparaison-des-méthodes-deuler-et-de-runge-kutta-4>Comparaison des méthodes d&rsquo;Euler et de Runge-Kutta 4</h4><table><thead><tr><th style=text-align:center>Méthode d&rsquo;Euler</th><th style=text-align:center>Méthode de Runge-Kutta 4</th></tr></thead><tbody><tr><td style=text-align:center><img src=../euler.png alt="Méthode d&amp;rsquo;Euler"></td><td style=text-align:center><img src="../rk4.png?style=reduce" alt="Méthode de Runge-Kutta 4"></td></tr></tbody></table><blockquote><p>Comparaison entre la méthode d’Euler et la méthode RK4; l’axe <strong>x</strong> est le temps, l’axe <strong>y</strong> est la vitesse résultante de l’intégration, k1, k2, k3, k4 sont les accélérations correspondent aux points indiqués (dérivatives de la courbe <strong>v(t))</strong>.</p></blockquote><p>La méthode Runge-Kutta 4, par opposition à une simple méthode d&rsquo;Euler, est une bonne solution à nos besoins :</p><ul><li>Elle permet d&rsquo;anticiper les futurs changements de directive, puisque nous calculons à chaque fois une estimation du prochain pas pour calculer l&rsquo;accélération correspondante</li><li>Elle est plus précise pour le même temps de calcul, permettant des étapes d&rsquo;intégration plus grandes, donc moins de points de données et un temps de calcul plus rapide.</li></ul><style>img[src$=train]{height:50%;width:50%}img[src$=reduce]{margin-top:15.5%}</style></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/dgex-solutions/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/dgexsolutions aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/DGEXSolutions/osrd aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 DGEX Solutions Tous droits réservés</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js integrity="sha512-JERecFUBbsm75UpkVheAuDOE8NdHjQBrPACfEQYPwvPG+fjgCpHAz1Jw2ci9EXmd3DdfiWth3O3CQvcfEg8gsA==" crossorigin=anonymous></script><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script>
<script src=/osrd-website/js/tabpane-persist.js></script>
<script src=/osrd-website/js/main.min.987dc87f2a40def4f1f8f66a5634d9d7036109b8bf9604e5db05112bc2d59ba2.js integrity="sha256-mH3IfypA3vTx+PZqVjTZ1wNhCbi/lgTl2wURK8LVm6I=" crossorigin=anonymous></script></body></html>